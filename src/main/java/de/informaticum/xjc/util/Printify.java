package de.informaticum.xjc.util;

import java.io.PrintWriter;
import java.io.StringWriter;
import com.sun.codemodel.JFormatter;
import com.sun.codemodel.JGenerable;

/**
 * Util class (technically a non-instantiable enum container) to provide some helper functions according to the fully-qualified names of packages and types.
 */
public enum Printify {
    ;

    /**
     * @param $component
     *            the requested code component
     * @return the according Java code (generated by the component itself)
     * @see JGenerable#generate(JFormatter)
     */
    public static final String render(final JGenerable $component) {
        final var out = new StringWriter();
        $component.generate(new JFormatter(new PrintWriter(out)));
        return out.toString();
    }

    /**
     * Implodes a format string. In detail, this method shrinks all space-character sequences, removes space-character after newline-marker, finally {@linkplain String#trim()
     * trims} the string.
     *
     * @param format
     *            the origin format string
     * @return the imploded string
     */
    public static final String implode(final String format) {
        return format.replaceAll(" +", " ")
                     .replace("%n ", "%n")
                     .trim();
    }

}
